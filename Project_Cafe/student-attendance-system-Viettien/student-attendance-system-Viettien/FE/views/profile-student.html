<div ng-controller="ProfileController" class="profile-page">

  <div class="profile-card">
    <h2 class="profile-title">Thông tin cá nhân</h2>

    <!-- Avatar -->
    <div class="avatar-section">
      <div class="avatar-wrapper">
        <img ng-src="{{ previewAvatar || student.avatarUrl || 'assets/img/default-avatar.png' }}" 
             alt="avatar"
             class="avatar-img">
      </div>

      <div class="avatar-actions">
        <span class="label">Ảnh đại diện</span>

        <input type="file" id="avatarInput" accept="image/*" class="hidden-input"
               onchange="angular.element(this).scope().previewImage(this)" />

        <div class="button-group">
          <button type="button"
                  class="btn btn-primary"
                  ng-click="chooseFile()">
            {{ previewAvatar ? "Đổi ảnh" : "Chọn ảnh" }}
          </button>

          <button type="button"
                  ng-if="previewAvatar"
                  ng-click="previewAvatar=null; selectedFile=null; checkDirty()"
                  class="btn btn-outline">
            Huỷ
          </button>
        </div>
      </div>
    </div>

    <!-- Form -->
    <div class="info-form">
      <div class="form-group">
        <label>Họ tên</label>
        <input type="text" ng-model="student.fullName" class="input-field" required>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" ng-model="student.email" class="input-field" required>
      </div>

      <div class="form-group">
        <label>Số điện thoại</label>
        <input type="text" ng-model="student.phone" class="input-field">
      </div>

      <div class="form-actions">
        <button type="button"
                class="btn btn-success"
                ng-click="updateProfile()"
                ng-disabled="!isDirty">
          Lưu thay đổi
        </button>
      </div>
    </div>
  </div>
</div>
