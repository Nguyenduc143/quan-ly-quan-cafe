<!-- Dashboard View -->
<div class="dashboard-wrapper">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-brand">
            <i class="fas fa-coffee"></i>
            <h2>Coffee BOH</h2>
        </div>
        
        <nav class="sidebar-menu">
            <a href="#!/dashboard" class="menu-item active">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            <a href="#!/menu" class="menu-item">
                <i class="fas fa-mug-hot"></i>
                <span>Quản lý Menu</span>
            </a>
            <a href="#!/orders" class="menu-item">
                <i class="fas fa-shopping-cart"></i>
                <span>Đơn hàng</span>
            </a>
            <a href="#!/tables" class="menu-item">
                <i class="fas fa-table"></i>
                <span>Sơ đồ bàn</span>
            </a>
            <a href="#!/inventory" class="menu-item">
                <i class="fas fa-warehouse"></i>
                <span>Kho nguyên liệu</span>
            </a>
            <a href="#!/employees" class="menu-item" ng-if="currentUser.role === 'Quản lý'">
                <i class="fas fa-users"></i>
                <span>Nhân viên</span>
            </a>
            <a href="#!/reports" class="menu-item">
                <i class="fas fa-file-alt"></i>
                <span>Báo cáo</span>
            </a>
        </nav>
        
        <div class="sidebar-bottom">
            <div class="user-profile">
                <i class="fas fa-user-circle"></i>
                <div style="display: flex; flex-direction: column; gap: 2px;">
                    <span style="font-weight: 600;" title="{{ vm.currentUser.username }}">{{ vm.currentUser.name || 'User' }}</span>
                    <span style="font-size: 11px; color: #95a5a6;">{{ vm.currentUser.role || 'Nhân viên' }}</span>
                </div>
            </div>
            <button ng-click="vm.logout()" class="btn-logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Đăng xuất</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-area">
        <!-- Header -->
        <header class="top-header">
            <div class="header-left">
                <button ng-click="vm.toggleSidebar()" class="btn-menu">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="page-title">Dashboard</h1>
            </div>
            <div class="header-right">
                <button ng-click="vm.toggleTheme()" class="btn-theme">
                    <i class="fas fa-moon"></i>
                </button>
                <span class="current-time">{{ vm.currentDateTime }}</span>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="content-area">
            <!-- Stats Cards -->
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-icon purple">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-label">Tổng doanh thu</h3>
                        <p class="stat-number">{{ vm.formatCurrency(vm.stats.todayRevenue) }}</p>
                        <span class="stat-badge positive">+12.5%</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon pink">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-label">Tổng đơn hàng</h3>
                        <p class="stat-number">{{ vm.stats.todayOrders }}</p>
                        <span class="stat-badge positive">+8.2%</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon cyan">
                        <i class="fas fa-coffee"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-label">Sản phẩm</h3>
                        <p class="stat-number">{{ vm.stats.totalProducts }}</p>
                        <span class="stat-badge">Trong menu</span>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon green">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-label">Nhân viên</h3>
                        <p class="stat-number">{{ vm.stats.totalEmployees }}</p>
                        <span class="stat-badge">Đang làm việc</span>
                    </div>
                </div>
            </div>

            <!-- Two Column Grid -->
            <div class="grid-2-col">
                <!-- Recent Orders -->
                <div class="content-card">
                    <div class="card-title-bar">
                        <h3><i class="fas fa-clock"></i> Đơn hàng gần đây</h3>
                        <a href="#!/orders" class="link-blue">Xem tất cả</a>
                    </div>
                    <div class="card-content">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Mã đơn</th>
                                    <th>Thời gian</th>
                                    <th>Tổng tiền</th>
                                    <th>Trạng thái</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-if="vm.recentOrders.length === 0">
                                    <td colspan="4" class="empty-text">Chưa có đơn hàng nào</td>
                                </tr>
                                <tr ng-repeat="order in vm.recentOrders">
                                    <td><strong>{{ order.id }}</strong></td>
                                    <td>{{ order.date | date:'HH:mm dd/MM/yyyy' }}</td>
                                    <td><strong>{{ vm.formatCurrency(order.total) }}</strong></td>
                                    <td>
                                        <span class="status-badge status-{{ vm.getStatusBadge(order.status) }}">
                                            {{ vm.getStatusText(order.status) }}
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Top Products -->
                <div class="content-card">
                    <div class="card-title-bar">
                        <h3><i class="fas fa-fire"></i> Sản phẩm bán chạy</h3>
                    </div>
                    <div class="card-content">
                        <div ng-if="vm.topProducts.length === 0" class="empty-section">
                            <i class="fas fa-chart-bar empty-icon"></i>
                            <p class="empty-text">Chưa có dữ liệu bán hàng</p>
                        </div>
                        <div ng-if="vm.topProducts.length > 0" class="products-list">
                            <div ng-repeat="product in vm.topProducts" class="product-item">
                                <div class="product-info">
                                    <h4 class="product-name">{{ product.name }}</h4>
                                    <p class="product-meta">Đã bán: {{ product.sold }} | Doanh thu: {{ vm.formatCurrency(product.revenue) }}</p>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" ng-style="{'width': (product.maxSold > 0 ? (product.sold / product.maxSold * 100) : 0) + '%'}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="content-card">
                <div class="card-title-bar">
                    <h3><i class="fas fa-bolt"></i> Thao tác nhanh</h3>
                </div>
                <div class="card-content">
                    <div class="actions-grid">
                        <a href="#!/orders" class="action-box">
                            <div class="action-icon">
                                <i class="fas fa-plus-circle"></i>
                            </div>
                            <span class="action-label">Tạo đơn mới</span>
                        </a>
                        <a href="#!/menu" class="action-box">
                            <div class="action-icon">
                                <i class="fas fa-coffee"></i>
                            </div>
                            <span class="action-label">Thêm sản phẩm</span>
                        </a>
                        <a href="#!/employees" class="action-box" ng-if="currentUser.role === 'Quản lý'">
                            <div class="action-icon">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <span class="action-label">Thêm nhân viên</span>
                        </a>
                        <a href="#!/reports" class="action-box">
                            <div class="action-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <span class="action-label">Xuất báo cáo</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
